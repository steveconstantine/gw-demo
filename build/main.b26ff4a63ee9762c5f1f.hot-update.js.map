{"version":3,"file":"main.b26ff4a63ee9762c5f1f.hot-update.js","sources":["webpack:///./src/components/Cart.js"],"sourcesContent":["import React, {Component} from 'react';\nimport LineItem from './LineItem';\nimport { Button as CartButton, TextField, Box, Layer } from 'gestalt';\nimport DonationRadioButtonGroup from './RadioButtonGroup/DonationRadioButtonGroup';\nimport _ from 'underscore';\nimport isMobile from 'ismobilejs';\n\nconst options = [\n  {\n    value: '0',\n    label: 'None'\n  }, {\n    value: '10',\n    label: '$10'\n  }, {\n    value: '50',\n    label: '$50'\n  }, {\n    value: '200',\n    label: '$200'\n  }, {\n    value: '1000',\n    label: '$1000'\n  }, {\n    value: 'more',\n    label: 'More'\n  }\n]\n\nclass Cart extends Component {\n  constructor(props) {\n  super(props);\n    this.state = {order : null, orderExtra: null};\n    this.setDonation = this.setDonation.bind(this);\n    this.setDonationClick = this.setDonationClick.bind(this);\n  }\n\n  setDonation(event) {\n    let value = event.value;\n    if (value < 0) {\n      value = 0;\n    }\n    this.setState({orderExtra: value});\n    let line_items = [];\n    let line_item_array = [];\n    if (_.isNull(this.props.checkout) == false && _.isUndefined(this.props.checkout.lineItems) == false) {\n      line_item_array = this.props.checkout.lineItems.edges.map((line_item) => {\n          return line_item.node.variant.id.toString();\n        }, this);\n      for (let i = 0; i < line_item_array.length; i++) {\n          if (line_item_array[i] == \"Z2lkOi8vc2hvcGlmeS9Qcm9kdWN0VmFyaWFudC8xNDIyOTU1NDg1NTk5NA==\") {\n              line_items.push(line_item_array[i]);\n          }\n      }\n      if (line_items.length > 0) {\n        this.props.setDonationValue(value.replace(/\\./g, \"\"), line_items[0]);\n      }\n    } else {\n    // do nothing\n    }\n  }\n\n  setDonationClick(value) {\n    this.setState({order: value, orderExtra: null });\n    let line_items = [];\n    let line_item_array = [];\n    if (_.isNull(this.props.checkout) == false && _.isUndefined(this.props.checkout.lineItems) == false) {\n      line_item_array = this.props.checkout.lineItems.edges.map((line_item) => {\n          return line_item.node.variant.id.toString();\n        }, this);\n      for (let i = 0; i < line_item_array.length; i++) {\n          if (line_item_array[i] == \"Z2lkOi8vc2hvcGlmeS9Qcm9kdWN0VmFyaWFudC8xNDIyOTU1NDg1NTk5NA==\") {\n              line_items.push(line_item_array[i]);\n          }\n      }\n      if (value != 'more' && line_items.length > 0) {\n        this.props.setDonationValue(value.replace(/\\./g, \"\"), line_items[0]);\n      }\n    } else {\n    // do nothing\n    }\n  }\n\n  render() {\n    let line_items = [];\n    if (_.isNull(this.props.checkout) == false && _.isUndefined(this.props.checkout.lineItems) == false) {\n    line_items = this.props.checkout.lineItems.edges.reduce((result, line_item) => {\n      result.push(<LineItem\n          removeLineItemInCart={this.props.removeLineItemInCart}\n          updateLineItemInCart={this.props.updateLineItemInCart}\n          key={line_item.node.id.toString()}\n          line_item={line_item.node}\n        />);\n    return result;\n  }, []);\n  }\n\n    let moreSelected = false;\n    let finalDonation;\n      if (this.state.order == 'more') {\n        moreSelected = true;\n        finalDonation = this.state.orderExtra;\n      } else {\n        finalDonation = this.state.order;\n      }\n\n      if (finalDonation == null && this.state.order == 'more' || this.state.orderExtra != null && this.state.order == 'more') {\n        finalDonation = parseFloat(this.state.orderExtra).toFixed(2);\n      } else if (this.state.order == null) {\n        finalDonation = parseFloat(0).toFixed(2);\n      } else if (this.state.order != 'more') {\n        finalDonation = parseFloat(this.state.order).toFixed(2);\n      }\n\n      if (finalDonation == null || finalDonation == 'NaN') {\n        finalDonation = parseFloat(0).toFixed(2);\n      }\n      let trueCheckout = _.isNull(this.props.checkout);\n      let finalCheckoutValue = parseFloat(finalDonation, 10).toFixed(2);\n      if (_.isNull(this.props.checkout) == false) {\n       finalCheckoutValue = parseFloat(this.props.checkout.totalPrice,10) + parseFloat(finalDonation, 10);\n     }\n    return (\n      <div>\n      { this.props.isCartOpen && (\n        <Layer>\n        <div style={{'background': 'white', 'display': 'grid', 'marginLeft': '0', 'minHeight': '100vh'}}>\n        <header className=\"Cart__header\" style={{'position': 'relative', 'width': '100vw', 'background': 'white', 'height': '100%'}}>\n          <h2>Cart</h2>\n          <button\n            onClick={this.props.handleCartClose}\n            className=\"Cart__close\" style={{'top': '15px !important'}}>\n            Ã—\n          </button>\n        </header>\n        <ul className=\"Cart__line-items\" style={{'position': 'relative', 'width': '100vw',  'background': 'white', 'overflowY': 'scroll'}}>\n          {line_items}\n        </ul>\n        <div className=\"Cart__donations\" style={{'position': 'relative', 'width': '100vw',  'background': 'white'}}>\n              <p className=\"donations donationsMobile\" style={{'position': 'relative', 'width': '100vw', 'background': 'white'}}>Donate Extra</p>\n              <DonationRadioButtonGroup items={options} value={moreSelected == 'true' ? 'moreSelected' : this.state.order}\n                                type=\"default\" onClick={this.setDonationClick}/>\n        </div>\n          { moreSelected == true  ?\n        <div className=\"Cart__donations__more\" style={{'position': 'relative', 'width': '100vw',  'background': 'white'}}>\n        <Box padding={3}>\n              <TextField\n          id=\"donate-more\"\n          onChange={this.setDonation}\n          placeholder=\"Donate Extra\"\n          value={this.state.orderExtra}\n          type={\"number\"}\n          />\n          </Box>\n        </div> : null }\n        <footer className=\"Cart__footer\" style={{'position': 'relative', 'width': '100vw',  'background': 'white'}}>\n          <div className=\"Cart-info clearfix\">\n            <div className=\"Cart-info__total Cart-info__small\">Subtotal</div>\n            <div className=\"Cart-info__pricing\">\n              <span className=\"pricing\">$ {trueCheckout == false ? this.props.checkout.subtotalPrice : finalDonation}</span>\n            </div>\n          </div>\n          <div className=\"Cart-info clearfix\">\n            <div className=\"Cart-info__total Cart-info__small\">Extra Donation</div>\n            <div className=\"Cart-info__pricing\">\n              <span className=\"pricing\">$ {finalDonation}</span>\n            </div>\n          </div>\n          <div className=\"Cart-info clearfix\">\n            <div className=\"Cart-info__total Cart-info__small\">Taxes</div>\n            <div className=\"Cart-info__pricing\">\n              <span className=\"pricing\">$ {trueCheckout == false ? this.props.checkout.totalTax : 0.00}</span>\n            </div>\n          </div>\n          <div className=\"Cart-info clearfix\">\n            <div className=\"Cart-info__total Cart-info__small\">Total</div>\n            <div className=\"Cart-info__pricing\">\n              <span className=\"pricing\">$ { trueCheckout == false ? finalCheckoutValue.toFixed(2) : finalDonation} </span>\n            </div>\n          </div>\n          <CartButton color=\"black\" text=\"Checkout\" onClick={() => {window.open(this.props.checkout.webUrl)}}></CartButton>\n        </footer>\n        </div>\n        </Layer>\n      )}\n      </div>\n    )}\n}\n\nexport default Cart;\n"],"mappings":"AAOA","sourceRoot":""}